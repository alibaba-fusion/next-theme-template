:root {
    {% set varReg = r/^\$[^(\s+(\*|\+|-|\/)\s+)]+\s*$/%}
    {% for compName, compGroup in variables %}
    /* ------------------------ {{compName}} ------------------------ */
    {% for variable in compGroup %}
    {% set rawValue = variable.rawValue %}
    {{'--' + variable.name.slice(1)}}: {{
        ('var(--' + rawValue.slice(1) + ', ' + variable.value + ')' if varReg.test(rawValue) else variable.value) | safe
    }};
    {% endfor %}
    {% endfor %}
}